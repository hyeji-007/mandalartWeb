import{n as C,r as o,u as F,g as k,j as e,a as E}from"./index-DRgm4NuZ.js";import{F as I,i as $}from"./index-D0Qt9kL9.js";import{P as D}from"./PopupLayout-DEN_2vDs.js";import{u as V}from"./index.esm-BpKNWMCi.js";import{c as B,a as p,o as P}from"./yup-BGCWYPGN.js";import"./index-D2dJIdCi.js";const R="login_session",W=C.div`
  max-width: 1280px;
  min-width: 1200px;
  margin: 0 auto;
  padding: 0px 50px;
  .fc-h-event {
    border: none;
  }
  .fc-h-event .fc-event-main {
    padding-left: 10px;
    color: #444;
    font-weight: 500;
  }
`,L=B({title:p().required("제목을 입력해 주세요."),content:p().required("간단 소개글을 입력해 주세요.")}),z=()=>{const h=o.useRef(null),d=F(),a=k(R),[x,m]=o.useState([]),[v,b]=o.useState(!1),[s,g]=o.useState({title:"",start:"",end:"",description:"",id:null}),j=()=>{const t=Math.floor(Math.random()*128+127),r=Math.floor(Math.random()*128+127),l=Math.floor(Math.random()*128+127);return`rgb(${t},${r},${l})`},f=t=>{const r=t.view.currentStart,l=r.getFullYear(),w=r.getMonth()+1;(async()=>{try{const N=(await E.get(`/api/mand/calendar?userId=${a==null?void 0:a.userId}&year=${l}&month=${w}`)).data.resultData.map(M=>({...M,backgroundColor:j()}));m(N)}catch(i){return console.log(i),i}})()},c=()=>{b(!1)},{register:n,handleSubmit:u,formState:{errors:_}}=V({resolver:P(L),defaultValues:{mid:"",title:"",content:"",pic:""},mode:"all"}),y=t=>{},S=t=>{const{name:r,value:l}=t.target;g({...s,[r]:l})};return o.useEffect(()=>{if(!(a!=null&&a.userId)){alert("회원 로그인이 필요합니다."),d("/login?url=/calendar");return}return()=>{}},[a,d]),e.jsxs(W,{children:[e.jsx("h1",{className:"subTitle",children:"계획표 캘린더"}),e.jsx(I,{ref:h,plugins:[$],initialView:"dayGridMonth",headerToolbar:{left:"prev,next",center:"title",right:"today"},datesSet:f,nowIndicator:!0,events:x,locale:"ko",height:"auto",eventDidMount:t=>{t.event.end&&(t.el.style.borderRadius="5px")}}),e.jsx(D,{isVisible:v,onClose:c,title:s.id?"":"등록하기",children:e.jsxs("form",{onSubmit:u(y),children:[e.jsx("input",{type:"hidden",value:"1",...n("idx")}),e.jsx("input",{type:"hidden",value:"test@test.com",...n("mid")}),e.jsxs("div",{className:"inputBox",children:[e.jsxs("label",{htmlFor:"titlePop",children:["실천목표 입력",e.jsx("span",{children:"*"})]}),e.jsx("input",{type:"text",id:"titlePop",value:s.title,...n("title")})]}),e.jsxs("div",{className:"inputBox",children:[e.jsx("label",{htmlFor:"startDate",children:"시작일"}),e.jsx("input",{type:"date",value:s.start,id:"startDate",...n("startDate")})]}),e.jsxs("div",{className:"inputBox",children:[e.jsx("label",{htmlFor:"endDate",children:"종료일"}),e.jsx("input",{type:"date",value:s.end,id:"endDate",...n("endDate")})]}),e.jsxs("div",{className:"inputBox",children:[e.jsx("label",{htmlFor:"contentPop",children:"세부내용 작성"}),e.jsx("textarea",{id:"contentPop",value:s.description,placeholder:"내용을 입력하세요.",...n("content")})]}),e.jsxs("div",{className:"inputBox",style:{display:"flex"},children:[e.jsx("label",{style:{minWidth:"auto",margin:"0px 20px 0px 0px"},children:"달성 여부"}),e.jsx("input",{type:"radio",value:"0",id:"value0",...n("success"),checked:!0})," ",e.jsx("label",{htmlFor:"value0",style:{minWidth:"auto",margin:"0px"},children:"진행중"}),"    ",e.jsx("input",{type:"radio",value:"1",id:"value1",...n("success")})," ",e.jsx("label",{htmlFor:"value1",style:{minWidth:"auto",margin:"0px"},children:"달성 완료"})]}),e.jsxs("div",{className:"inputBox",children:[e.jsx("label",{children:"색상 선택"}),e.jsx("div",{style:{position:"relative",width:"30px",height:"30px",background:"none",border:"1px solid #eee",borderRadius:"100px",overflow:"hidden"},children:e.jsx("input",{type:"color",name:"background",value:s.background,onChange:S,style:{position:"absolute",top:"-10px",left:"-10px",width:"70px",height:"50px",background:"none",border:"none"}})})]}),e.jsxs("div",{className:"buttonWrap",children:[e.jsx("button",{type:"button",className:"btnLine",onClick:()=>c(),children:"취소하기"}),e.jsx("button",{type:"button",className:"btnColor",onClick:()=>u(),children:"수정하기"})]})]})})]})};export{z as default};
